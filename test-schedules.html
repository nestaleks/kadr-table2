<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –º–æ–¥—É–ª—è –ì—Ä–∞—Ñ—ñ–∫–∏ —Ä–æ–±–æ—Ç–∏</title>
    <link rel="stylesheet" href="test-styles.css">
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .error { color: red; background: #ffebee; padding: 10px; margin: 10px 0; }
        .success { color: green; background: #e8f5e8; padding: 10px; margin: 10px 0; }
        .test-result { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        #moduleTest { margin-top: 30px; border: 1px solid #ddd; padding: 20px; }
    </style>
</head>
<body>
    <h1>–¢–µ—Å—Ç –º–æ–¥—É–ª—è –ì—Ä–∞—Ñ—ñ–∫–∏ —Ä–æ–±–æ—Ç–∏</h1>
    <div id="testResults"></div>
    
    <div id="moduleTest">
        <h2>–¢–µ—Å—Ç —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É –º–æ–¥—É–ª—è</h2>
        <button onclick="testModuleRender()">–ü—Ä–æ—Ç–µ—Å—Ç—É–≤–∞—Ç–∏ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥</button>
        <div id="moduleContent"></div>
    </div>
    
    <script>
        const testResults = document.getElementById('testResults');
        
        function addResult(message, isError = false) {
            const div = document.createElement('div');
            div.className = isError ? 'error' : 'success';
            div.textContent = message;
            testResults.appendChild(div);
        }
        
        // –¢–µ—Å—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è BaseModule
        try {
            if (typeof BaseModule !== 'undefined') {
                addResult('‚úì BaseModule –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ');
            } else {
                throw new Error('BaseModule –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
            }
        } catch (error) {
            addResult('‚úó –ü–æ–º–∏–ª–∫–∞ BaseModule: ' + error.message, true);
        }
        
        // –¢–µ—Å—Ç 2: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è SchedulesModule
        try {
            if (typeof SchedulesModule !== 'undefined') {
                addResult('‚úì SchedulesModule –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ');
            } else {
                throw new Error('SchedulesModule –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ');
            }
        } catch (error) {
            addResult('‚úó –ü–æ–º–∏–ª–∫–∞ SchedulesModule: ' + error.message, true);
        }
        
        // –¢–µ—Å—Ç 3: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞
        try {
            const mockDatabase = {
                getAll: async () => [],
                add: async () => {},
                update: async () => {},
                delete: async () => {}
            };
            
            const scheduleModule = new SchedulesModule(mockDatabase);
            addResult('‚úì –ï–∫–∑–µ–º–ø–ª—è—Ä SchedulesModule —Å—Ç–≤–æ—Ä–µ–Ω–æ —É—Å–ø—ñ—à–Ω–æ');
            
            // –¢–µ—Å—Ç –º–µ—Ç–æ–¥—ñ–≤
            if (typeof scheduleModule.render === 'function') {
                addResult('‚úì –ú–µ—Ç–æ–¥ render() —ñ—Å–Ω—É—î');
            }
            if (typeof scheduleModule.init === 'function') {
                addResult('‚úì –ú–µ—Ç–æ–¥ init() —ñ—Å–Ω—É—î');
            }
            if (typeof scheduleModule.loadData === 'function') {
                addResult('‚úì –ú–µ—Ç–æ–¥ loadData() —ñ—Å–Ω—É—î');
            }
            
        } catch (error) {
            addResult('‚úó –ü–æ–º–∏–ª–∫–∞ —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è –µ–∫–∑–µ–º–ø–ª—è—Ä–∞: ' + error.message, true);
        }
        
        // –ú–æ–∫ hrSystem –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è
        window.hrSystem = {
            showModal: function(modal) {
                modal.style.display = 'flex';
                modal.classList.add('show');
            },
            closeModal: function(modal) {
                modal.style.display = 'none';
                modal.classList.remove('show');
            },
            showNotification: function(message, type) {
                console.log(`${type.toUpperCase()}: ${message}`);
                addResult(`üì¢ ${message}`, type === 'error');
            }
        };
        
        // –§—É–Ω–∫—Ü—ñ—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É
        window.testModuleRender = async function() {
            try {
                const mockDatabase = {
                    getAll: async (table) => {
                        if (table === 'schedules') return [];
                        if (table === 'employees') return [];
                        if (table === 'scheduleTemplates') return [];
                        return [];
                    },
                    add: async () => ({ id: 1 }),
                    update: async () => {},
                    delete: async () => {}
                };
                
                const scheduleModule = new SchedulesModule(mockDatabase);
                const html = await scheduleModule.render();
                
                document.getElementById('moduleContent').innerHTML = html;
                addResult('‚úì –ú–æ–¥—É–ª—å —É—Å–ø—ñ—à–Ω–æ –≤—ñ–¥—Ä–µ–Ω–¥–µ—Ä–µ–Ω–æ');
                
            } catch (error) {
                addResult('‚úó –ü–æ–º–∏–ª–∫–∞ —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥—É: ' + error.message, true);
                console.error('–ü–æ–≤–Ω–∞ –ø–æ–º–∏–ª–∫–∞:', error);
            }
        }
    </script>
    
    <!-- –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π -->
    <script src="database.js"></script>
    <script src="hr-system.js"></script>
    <script src="modules/schedules.js"></script>
</body>
</html>